{{- $page := . }}

{{- if $page.IsPage }}
<h1 class="post-title">
    {{- if $page.Draft }}* {{ end }}
    {{ $page.Title -}}
</h1>
<p class="post-meta">
    {{- if $page.Date }}
        {{- if ne $page.Date $page.Lastmod }}
            <span>UPDATED : </span>
            <span>{{ $page.Lastmod.Format "2006-01-02" }}</span>
            <span>,</span>
            <span>CREATED : </span>
        {{- end }}
        <span>{{ $page.Date.Format "2006-01-02" }}</span>
    {{- end }}
    {{- if $page.Params.tags }}
        {{ if $page.Date }},{{ end }}
        {{- $tags := $page.GetTerms "tags" }}
        {{- partial "tags" $tags }}
    {{- end }}
</p>
{{- end }}

{{- with $page.Resources.Get "poster.webp" }}
    {{- $poster := . }}
    {{- $source := $page.Params.source }}
    {{- if $source }}
        <figure class="poster poster-mask">
            <a target="_blank" href="{{- $source -}}" rel="noreferrer">
                <img src="{{- $poster.RelPermalink -}}">
                <i class="fa-solid fa-play"></i>
            </a>
        </figure>
    {{- else }}
        <figure class="poster">
            <img src="{{- $poster.RelPermalink -}}">
        </figure>
    {{- end }}
{{- end }}

<div class="post-content">
    {{- $page.Content }}
</div>